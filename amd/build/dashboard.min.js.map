{"version":3,"sources":["../src/dashboard.js"],"names":["define","$","log","init","that","calendars","lang","attr","replace","substr","each","matchs","exec","blockid","on","submitdashboardfilter","id","dhtmlXCalendarObject","loadUserLanguage","setSkin","debug","submit"],"mappings":"AAyBAA,OAAM,6BAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAE7C,MAAO,CAEHC,IAAI,CAAE,eAAW,CAEb,GAAIC,CAAAA,CAAI,CAAG,IAAX,CAEAA,CAAI,CAACC,SAAL,CAAiB,EAAjB,CAEA,GAAIC,CAAAA,CAAI,CAAGL,CAAC,CAAC,MAAD,CAAD,CAAUM,IAAV,CAAe,MAAf,EAAuBC,OAAvB,CAA+B,IAA/B,CAAqC,GAArC,EAA0CC,MAA1C,CAAiD,CAAjD,CAAoD,CAApD,CAAX,CAGAR,CAAC,CAAC,8BAAD,CAAD,CAAkCS,IAAlC,CAAwC,UAAW,IAE3CC,CAAAA,CAAM,CADE,yBACC,CAAMC,IAAN,CAAWX,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,IAAb,CAAX,CAFkC,CAG3CM,CAAO,CAAGF,CAAM,CAAC,CAAD,CAH2B,CAK/CV,CAAC,CAAC,6BAA+BY,CAAhC,CAAD,CAA0CC,EAA1C,CAA6C,QAA7C,CAAuDV,CAAI,CAACW,qBAA5D,CACH,CAND,EAQAd,CAAC,CAAC,8BAAD,CAAD,CAAkCS,IAAlC,CAAwC,UAAW,CAC/CT,CAAC,CAAC,IAAD,CAAD,CAAQa,EAAR,CAAW,OAAX,CAAoBV,CAAI,CAACW,qBAAzB,CACH,CAFD,EAKAd,CAAC,CAAC,uBAAD,CAAD,CAA2BS,IAA3B,CAAgC,UAAW,CACvC,GAAIM,CAAAA,CAAE,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,IAAb,CAAT,CACAH,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAqB,GAAIC,CAAAA,oBAAJ,CAAyBD,CAAzB,CAArB,CACAZ,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAmBE,gBAAnB,CAAoCZ,CAAI,CAAG,OAA3C,EACAF,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAmBG,OAAnB,CAA2B,SAA3B,CACH,CALD,EAOAlB,CAAC,CAAC,4BAAD,CAAD,CAAgCS,IAAhC,CAAqC,UAAW,CAC5C,GAAIM,CAAAA,CAAE,CAAGf,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,IAAb,CAAT,CACAS,CAAE,CAAGA,CAAE,CAACR,OAAH,CAAW,OAAX,CAAoB,EAApB,CAAL,CACAJ,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAqB,GAAIC,CAAAA,oBAAJ,CAAyB,CAACD,CAAE,CAAG,OAAN,CAAeA,CAAE,CAAG,KAApB,CAAzB,CAArB,CACAZ,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAmBE,gBAAnB,CAAoCZ,CAAI,CAAG,OAA3C,EACAF,CAAI,CAACC,SAAL,CAAeW,CAAf,EAAmBG,OAAnB,CAA2B,SAA3B,CACH,CAND,EAQAjB,CAAG,CAACkB,KAAJ,CAAU,iCAAV,CAEH,CAzCE,CA2CHL,qBAAqB,CAAE,UAAiC,IAGhDX,CAAAA,CAAI,CAAGH,CAAC,CAAC,IAAD,CAHwC,CAKhDU,CAAM,CADE,kCACC,CAAMC,IAAN,CAAWR,CAAI,CAACG,IAAL,CAAU,MAAV,CAAX,CALuC,CAOpD,GAAII,CAAJ,CAAY,CACR,GAAIE,CAAAA,CAAO,CAAGF,CAAM,CAAC,CAAD,CAApB,CACAV,CAAC,CAAC,mBAAqBY,CAAtB,CAAD,CAAgCQ,MAAhC,EACH,CACJ,CAtDE,CAwDV,CA1DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     block_dashboard/dashboard\n * @package    blocks\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: true, undef:false\n// global dhtmlXCalendarObject\n/* eslint-disable no-undef */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    return {\n\n        init: function() {\n\n            var that = this;\n\n            that.calendars = [];\n\n            var lang = $('html').attr('lang').replace(/-/g, '_').substr(0, 2);\n\n            // Attach filter handles if autosubmit.\n            $('.dashboard-filter-autosubmit').each( function() {\n                var regex = /dashboard-auto-([0-9]+)/;\n                var matchs = regex.exec($(this).attr('id'));\n                var blockid = matchs[1];\n\n                $('.dashboard-filter-element-' + blockid).on('change', that.submitdashboardfilter);\n            });\n\n            $('.dashboard-filter-submitters').each( function() {\n                $(this).on('click', that.submitdashboardfilter);\n            });\n\n            // Capture all data params and attach a dhtmlxCalendar.\n            $('.dashboard-param-date').each(function() {\n                var id = $(this).attr('id');\n                that.calendars[id] = new dhtmlXCalendarObject(id);\n                that.calendars[id].loadUserLanguage(lang + '_utf8');\n                that.calendars[id].setSkin('dhx_web');\n            });\n\n            $('.dashboard-param-daterange').each(function() {\n                var id = $(this).attr('id');\n                id = id.replace('_from', '');\n                that.calendars[id] = new dhtmlXCalendarObject([id + '_from', id + '_to']);\n                that.calendars[id].loadUserLanguage(lang + '_utf8');\n                that.calendars[id].setSkin('dhx_web');\n            });\n\n            log.debug('Block dashboard AMD initialized');\n\n        },\n\n        submitdashboardfilter: function submitdashboardfilter() {\n\n            // That is the Jquery representant of the changed form element.\n            var that = $(this);\n            var regex = /(?:filter|filtersubmit)([0-9]+)_/;\n            var matchs = regex.exec(that.attr('name'));\n\n            if (matchs) {\n                var blockid = matchs[1];\n                $('#dashboard-form-' + blockid).submit();\n            }\n        }\n    };\n});"],"file":"dashboard.min.js"}